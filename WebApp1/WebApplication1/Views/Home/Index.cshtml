@{
    ViewData["Title"] = "Home";
}

@model IEnumerable<Product>
<!doctype html>
<head>
    <title>@ViewBag.Title</title>
</head>
<body>
    <table class="table table-bordered table-striped table-dark">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Cost</th>

            @if (User.IsInRole("user") || !User.Identity.IsAuthenticated)
            {
                <th>Buy</th>
            }
            @if (User.IsInRole("admin"))
            {
                <th>Manage</th>
            }

        </tr>
        @foreach (var product in Model)
        {
            <tr>
                <td>@product.ID</td>
                <td>@product.ProductName</td>
                <td>@product.Cost</td>
                @if (User.IsInRole("user") || !User.Identity.IsAuthenticated)
                {
                    <td><a href="~/Home/Buy/@product.ID" class="btn btn-success">Buy</a></td>
                }
                @if (User.IsInRole("admin"))
                {
                    <td>
                        <a href="~/Home/Update/@product.ID" class="btn btn-primary">Update</a>
                        <a href="~/Home/Delete/@product.ID" class="btn btn-danger">Delete</a>
                    </td>
                }

            </tr>
        }
    </table>
    @if (User.IsInRole("admin"))
    {
        <a href="~/Home/Create" class="btn btn-light">Create</a>
    }

</body>